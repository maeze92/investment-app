# Contributing Guide

Willkommen zum Investitionsplanungs-App Projekt! Diese Anleitung hilft dir, zum Projekt beizutragen.

---

## üìö Vor dem Start

Bitte lies zuerst diese Dokumente:

1. **[README.md](./README.md)** - Projekt-√úbersicht & Quick Start
2. **[ENTWICKLUNGSPLAN.md](./ENTWICKLUNGSPLAN.md)** - Detaillierter Plan aller Features
3. **[PRD_LOCAL.md](./PRD_LOCAL.md)** - Product Requirements Document
4. **[CHANGELOG.md](./CHANGELOG.md)** - Versions-Historie

---

## üöÄ Entwicklungsumgebung Setup

### Voraussetzungen

- Node.js 18+ (empfohlen: 20.x)
- npm 9+ oder yarn
- Git
- VS Code (empfohlen) mit Extensions:
  - ESLint
  - Prettier
  - TypeScript
  - Tailwind CSS IntelliSense

### Setup-Schritte

```bash
# 1. Repository clonen
git clone [repository-url]
cd investment-app

# 2. Dependencies installieren
npm install

# 3. Entwicklungsserver starten
npm run dev

# 4. Mock-Daten laden
# √ñffne http://localhost:3000/seed und klicke "Daten generieren"
# ODER verwende Browser DevTools Console:
# > await storageService.initialize()
# > await storageService.restore(mockDataGenerator.seedDatabase())

# 5. Einloggen
# √ñffne http://localhost:3000/login
# Verwende: vr@demo.de / demo
```

---

## üèóÔ∏è Projektstruktur

```
investment-app/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # Auth-Gruppe (Login)
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard Pages
‚îÇ   ‚îú‚îÄ‚îÄ investments/       # Investment Pages
‚îÇ   ‚îú‚îÄ‚îÄ cashflows/         # Cashflow Pages
‚îÇ   ‚îú‚îÄ‚îÄ seed/              # Data Seeding UI
‚îÇ   ‚îî‚îÄ‚îÄ api/               # API Routes (Mock)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # shadcn/ui Components
‚îÇ   ‚îú‚îÄ‚îÄ investments/       # Investment-spezifische Components
‚îÇ   ‚îú‚îÄ‚îÄ cashflows/         # Cashflow Components
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard Widgets
‚îÇ   ‚îú‚îÄ‚îÄ notifications/     # Notification Components
‚îÇ   ‚îî‚îÄ‚îÄ providers/         # React Context Providers
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ storage/           # LocalStorage & DataAdapter
‚îÇ   ‚îú‚îÄ‚îÄ cashflow/          # Cashflow Business Logic
‚îÇ   ‚îú‚îÄ‚îÄ notifications/     # Notification Service
‚îÇ   ‚îú‚îÄ‚îÄ reports/           # Report Generators
‚îÇ   ‚îú‚îÄ‚îÄ validation/        # Zod Schemas
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # Helper Functions
‚îú‚îÄ‚îÄ stores/                # Zustand State Management
‚îÇ   ‚îú‚îÄ‚îÄ useAuthStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ useAppStore.ts
‚îú‚îÄ‚îÄ types/                 # TypeScript Definitions
‚îÇ   ‚îú‚îÄ‚îÄ entities.ts
‚îÇ   ‚îú‚îÄ‚îÄ enums.ts
‚îÇ   ‚îî‚îÄ‚îÄ dtos.ts
‚îú‚îÄ‚îÄ hooks/                 # Custom React Hooks
‚îú‚îÄ‚îÄ scripts/               # Utility Scripts
‚îî‚îÄ‚îÄ __tests__/             # Tests (TODO)
```

---

## üéØ Workflow

### 1. Feature ausw√§hlen

Siehe **[ENTWICKLUNGSPLAN.md](./ENTWICKLUNGSPLAN.md)** f√ºr offene Features.

Aktuell in Arbeit: **Phase 4 - Investment Management**

### 2. Branch erstellen

```bash
# Feature Branch
git checkout -b feature/investment-list-view

# Bug Fix Branch
git checkout -b fix/login-error

# Improvement Branch
git checkout -b improve/dashboard-performance
```

### 3. Entwickeln

**Code Style Guidelines:**

#### TypeScript
- ‚úÖ Strikte Type-Safety (keine `any`)
- ‚úÖ Interfaces √ºber Types (f√ºr Entities)
- ‚úÖ Descriptive Namen
- ‚úÖ JSDoc Kommentare f√ºr Public APIs

```typescript
// ‚úÖ Good
interface Investment {
  id: UUID;
  name: string;
  total_amount: number;
}

// ‚ùå Bad
type Inv = {
  id: any;
  n: string;
};
```

#### React Components
- ‚úÖ Functional Components mit Hooks
- ‚úÖ Typed Props
- ‚úÖ Destructuring
- ‚úÖ Early Returns

```typescript
// ‚úÖ Good
interface InvestmentCardProps {
  investment: Investment;
  onEdit?: () => void;
}

export function InvestmentCard({ investment, onEdit }: InvestmentCardProps) {
  if (!investment) return null;

  return (
    <Card>
      <CardHeader>{investment.name}</CardHeader>
    </Card>
  );
}

// ‚ùå Bad
export function InvestmentCard(props: any) {
  return <div>{props.investment.name}</div>;
}
```

#### State Management
- ‚úÖ Zustand f√ºr globalen State
- ‚úÖ useState f√ºr lokalen State
- ‚úÖ Descriptive Actions

```typescript
// ‚úÖ Good
const createInvestment = async (data: CreateInvestmentDTO) => {
  // ...
};

// ‚ùå Bad
const create = (d: any) => {
  // ...
};
```

#### Styling
- ‚úÖ Tailwind CSS Utility Classes
- ‚úÖ shadcn/ui Components
- ‚úÖ Responsive Design (mobile-first)
- ‚úÖ Dark Mode Support vorbereitet

```typescript
// ‚úÖ Good
<div className="flex items-center gap-4 p-4 rounded-lg border bg-card">
  <Button variant="outline" size="sm">
    Bearbeiten
  </Button>
</div>

// ‚ùå Bad
<div style={{ display: 'flex', padding: '16px' }}>
  <button>Bearbeiten</button>
</div>
```

### 4. Testing

```bash
# Unit Tests ausf√ºhren (wenn vorhanden)
npm test

# Spezifischen Test
npm test -- InvestmentForm.test

# Coverage
npm test -- --coverage
```

**Test-Strategie:**
- Unit Tests f√ºr Business Logic (lib/)
- Integration Tests f√ºr Workflows
- Component Tests f√ºr UI
- E2E Tests f√ºr kritische Flows

### 5. Commit

**Commit Message Format:**

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Types:**
- `feat`: Neues Feature
- `fix`: Bug Fix
- `docs`: Dokumentation
- `style`: Code-Formatierung
- `refactor`: Code-Refactoring
- `test`: Tests hinzuf√ºgen/√§ndern
- `chore`: Build/Config √Ñnderungen

**Beispiele:**

```bash
feat(investments): add investment list view with filtering

- Implement InvestmentTable component
- Add filtering by status, category, and date
- Add search functionality
- Add pagination

Closes #42

---

fix(login): resolve invalid credentials error

- Add defensive error handling in DataAdapter
- Initialize storage before login attempt
- Improve error messages

Fixes #38

---

docs(readme): update quick start guide

- Add seed instructions
- Update demo credentials table
```

### 6. Pull Request

**PR Template:**

```markdown
## Beschreibung
[Was wurde ge√§ndert und warum?]

## Type of Change
- [ ] Bug Fix
- [ ] New Feature
- [ ] Breaking Change
- [ ] Documentation Update

## Testing
- [ ] Unit Tests hinzugef√ºgt/aktualisiert
- [ ] Manuell getestet
- [ ] Keine Regression

## Screenshots (wenn UI-√Ñnderung)
[Screenshots einf√ºgen]

## Checklist
- [ ] Code folgt Style Guidelines
- [ ] TypeScript Errors behoben
- [ ] ESLint Warnings behoben
- [ ] Selbst-Review durchgef√ºhrt
- [ ] Dokumentation aktualisiert
- [ ] CHANGELOG.md aktualisiert (wenn n√∂tig)
```

---

## üß™ Testing

### Unit Tests

```typescript
// __tests__/unit/lib/utils.test.ts
import { formatCurrency, formatDate } from '@/lib/utils';

describe('formatCurrency', () => {
  it('should format number as EUR currency', () => {
    expect(formatCurrency(1000)).toBe('1.000,00 ‚Ç¨');
  });
});
```

### Integration Tests

```typescript
// __tests__/integration/investment-workflow.test.ts
describe('Investment Workflow', () => {
  it('should create and approve investment', async () => {
    // Login as GF
    await login('gf@demo.de', 'demo');

    // Create investment
    const investment = await createInvestment({...});

    // Submit for approval
    await submitForApproval(investment.id);

    // Verify status
    expect(investment.status).toBe('zur_genehmigung');
  });
});
```

---

## üêõ Bug Reports

**Bug melden via Issue:**

```markdown
## Bug Beschreibung
[Klare Beschreibung des Bugs]

## Schritte zur Reproduktion
1. Gehe zu '...'
2. Klicke auf '...'
3. Scrolle nach '...'
4. Siehe Fehler

## Erwartetes Verhalten
[Was sollte passieren?]

## Screenshots
[Screenshots wenn m√∂glich]

## Environment
- Browser: [z.B. Chrome 120]
- OS: [z.B. Windows 11]
- Version: [z.B. 0.3.0]

## Zus√§tzlicher Kontext
[Weitere Informationen]
```

---

## üí° Feature Requests

**Feature vorschlagen via Issue:**

```markdown
## Feature Beschreibung
[Klare Beschreibung des Features]

## Use Case
[Warum wird das Feature ben√∂tigt?]

## Vorgeschlagene L√∂sung
[Wie k√∂nnte es implementiert werden?]

## Alternativen
[Andere L√∂sungsans√§tze?]

## Priorit√§t
- [ ] Low
- [ ] Medium
- [ ] High
- [ ] Critical
```

---

## üìã Code Review Checklist

### Als Author:
- [ ] Code ist self-explanatory
- [ ] Kommentare f√ºr komplexe Logik
- [ ] Keine Console.logs im Production Code
- [ ] TypeScript Errors behoben
- [ ] ESLint Warnings behoben
- [ ] Tests hinzugef√ºgt (wenn n√∂tig)
- [ ] Dokumentation aktualisiert
- [ ] CHANGELOG.md aktualisiert

### Als Reviewer:
- [ ] Code folgt Style Guidelines
- [ ] Logik ist korrekt
- [ ] Edge Cases behandelt
- [ ] Performance ber√ºcksichtigt
- [ ] Security ber√ºcksichtigt
- [ ] Tests ausreichend
- [ ] Dokumentation klar

---

## üîí Security

**Sicherheitsrichtlinien:**
- ‚ùå Keine Secrets im Code
- ‚ùå Keine API Keys committen
- ‚úÖ Input Validation
- ‚úÖ XSS Prevention
- ‚úÖ CSRF Protection (sp√§ter mit Supabase)

**Sicherheitsl√ºcke melden:**
Bitte nicht √∂ffentlich als Issue, sondern direkt an [security@example.com]

---

## üìö Ressourcen

### Dokumentation
- [Next.js Docs](https://nextjs.org/docs)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [Zustand Docs](https://docs.pmnd.rs/zustand)
- [shadcn/ui Docs](https://ui.shadcn.com)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)

### Tools
- [React DevTools](https://react.dev/learn/react-developer-tools)
- [TypeScript Playground](https://www.typescriptlang.org/play)
- [Tailwind CSS Playground](https://play.tailwindcss.com)

---

## ‚ùì FAQ

### Wie starte ich mit einem neuen Feature?
1. Siehe [ENTWICKLUNGSPLAN.md](./ENTWICKLUNGSPLAN.md) f√ºr offene Tasks
2. Erstelle Branch: `git checkout -b feature/your-feature`
3. Entwickle lokal
4. Teste gr√ºndlich
5. Erstelle Pull Request

### Wo finde ich Mock-Daten?
- Automatisch generiert beim Seeding
- Oder manuell: `lib/utils/mockDataGenerator.ts`

### Wie debugge ich die App?
- React DevTools (Browser Extension)
- Chrome DevTools
- Console.log (nur in Development!)
- Zustand DevTools

### Wie teste ich verschiedene Rollen?
- Verwende Quick-Login Buttons auf Login-Seite
- Oder baue Dev Tools Panel (Phase 8)

### Warum Local Storage statt echter DB?
- Lokale Entwicklung ohne Backend-Setup
- Einfaches Testing
- Offline-f√§hig
- Migration zu Supabase sp√§ter

---

## ü§ù Community

**Hilfe ben√∂tigt?**
- Erstelle Issue auf GitHub
- Frage im Team-Chat
- Siehe Dokumentation

**Ideen teilen?**
- Feature Request Issue erstellen
- Im Team diskutieren
- PR mit Prototype

---

## üìú License

Internes Projekt - Alle Rechte vorbehalten

---

**Danke f√ºr deinen Beitrag! üéâ**
